\hypertarget{io__nix_8c}{\section{io\-\_\-nix.\-c \-File \-Reference}
\label{io__nix_8c}\index{io\-\_\-nix.\-c@{io\-\_\-nix.\-c}}
}


\-Handles device \-I/\-O for $\ast$nix.  


{\ttfamily \#include $<$stdio.\-h$>$}\*
{\ttfamily \#include $<$stdlib.\-h$>$}\*
{\ttfamily \#include $<$unistd.\-h$>$}\*
{\ttfamily \#include $<$bluetooth/bluetooth.\-h$>$}\*
{\ttfamily \#include $<$bluetooth/hci.\-h$>$}\*
{\ttfamily \#include $<$bluetooth/hci\-\_\-lib.\-h$>$}\*
{\ttfamily \#include $<$bluetooth/l2cap.\-h$>$}\*
{\ttfamily \#include \char`\"{}definitions.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}wiic\-\_\-internal.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}io.\-h\char`\"{}}\*
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{io__nix_8c_a52ee1d13f65c44656f4cc95d4d54d8f8}{wiic\-\_\-find} (struct \hyperlink{structwiimote__t}{wiimote\-\_\-t} $\ast$$\ast$wm, int max\-\_\-wiimotes, int timeout)
\begin{DoxyCompactList}\small\item\em \-Find a wiimote or wiimotes. \end{DoxyCompactList}\item 
int \hyperlink{io__nix_8c_a356c1950a83d07f6f31efedfe5f5cdcc}{wiic\-\_\-connect} (struct \hyperlink{structwiimote__t}{wiimote\-\_\-t} $\ast$$\ast$wm, int wiimotes, int autoreconnect)
\begin{DoxyCompactList}\small\item\em \-Connect to a wiimote or wiimotes once an address is known. \end{DoxyCompactList}\item 
int \hyperlink{io__nix_8c_a7e041ddd6808f33ad799c6975bbe091f}{wiic\-\_\-load} (struct \hyperlink{structwiimote__t}{wiimote\-\_\-t} $\ast$$\ast$wm)
\begin{DoxyCompactList}\small\item\em \-Load \-Wii devices registered in the wiimotes.\-config file. \end{DoxyCompactList}\item 
int \hyperlink{io__nix_8c_a48a32197084dfb1ab5c8d3737b51257f}{wiic\-\_\-connect\-\_\-single} (struct \hyperlink{structwiimote__t}{wiimote\-\_\-t} $\ast$wm, char $\ast$address, int autoreconnect)
\begin{DoxyCompactList}\small\item\em \-Connect to a wiimote with a known address. \end{DoxyCompactList}\item 
void \hyperlink{io__nix_8c_a219a4ed8738f4937a777e02ed8656fcf}{wiic\-\_\-disconnect} (struct \hyperlink{structwiimote__t}{wiimote\-\_\-t} $\ast$wm)
\begin{DoxyCompactList}\small\item\em \-Disconnect a wiimote. \end{DoxyCompactList}\item 
\hypertarget{io__nix_8c_a13c7e16ba153cd7639906d6dfb2e1826}{int {\bfseries wiic\-\_\-io\-\_\-read} (struct \hyperlink{structwiimote__t}{wiimote\-\_\-t} $\ast$wm)}\label{io__nix_8c_a13c7e16ba153cd7639906d6dfb2e1826}

\item 
\hypertarget{io__nix_8c_a267abb66564b2af088e34d5580f37c59}{int {\bfseries wiic\-\_\-io\-\_\-write} (struct \hyperlink{structwiimote__t}{wiimote\-\_\-t} $\ast$wm, \hyperlink{wiic__macros_8h_a0c8186d9b9b7880309c27230bbb5e69d}{byte} $\ast$buf, int len)}\label{io__nix_8c_a267abb66564b2af088e34d5580f37c59}

\end{DoxyCompactItemize}


\subsection{\-Detailed \-Description}
\-Handles device \-I/\-O for $\ast$nix. 

\-Definition in file \hyperlink{io__nix_8c_source}{io\-\_\-nix.\-c}.



\subsection{\-Function \-Documentation}
\hypertarget{io__nix_8c_a356c1950a83d07f6f31efedfe5f5cdcc}{\index{io\-\_\-nix.\-c@{io\-\_\-nix.\-c}!wiic\-\_\-connect@{wiic\-\_\-connect}}
\index{wiic\-\_\-connect@{wiic\-\_\-connect}!io_nix.c@{io\-\_\-nix.\-c}}
\subsubsection[{wiic\-\_\-connect}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf wiic\-\_\-connect} (
\begin{DoxyParamCaption}
\item[{struct {\bf wiimote\-\_\-t} $\ast$$\ast$}]{wm, }
\item[{int}]{wiimotes, }
\item[{int}]{autoreconnect}
\end{DoxyParamCaption}
)}}\label{io__nix_8c_a356c1950a83d07f6f31efedfe5f5cdcc}


\-Connect to a wiimote or wiimotes once an address is known. 


\begin{DoxyParams}{\-Parameters}
{\em wm} & \-An array of \hyperlink{structwiimote__t}{wiimote\-\_\-t} structures. \\
\hline
{\em wiimotes} & \-The number of wiimote structures in {\itshape wm\/}. \\
\hline
{\em autoreconnect} & \-Re-\/connects the device in case of unexpected disconnection.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
\-The number of wiimotes that successfully connected.
\end{DoxyReturn}
\begin{DoxySeeAlso}{\-See also}
\hyperlink{io__nix_8c_a52ee1d13f65c44656f4cc95d4d54d8f8}{wiic\-\_\-find()} 

\hyperlink{io__nix_8c_a48a32197084dfb1ab5c8d3737b51257f}{wiic\-\_\-connect\-\_\-single()} 

\hyperlink{io__nix_8c_a219a4ed8738f4937a777e02ed8656fcf}{wiic\-\_\-disconnect()}
\end{DoxySeeAlso}
\-Connect to a number of wiimotes when the address is already set in the \hyperlink{structwiimote__t}{wiimote\-\_\-t} structures. \-These addresses are normally set by the \hyperlink{io__nix_8c_a52ee1d13f65c44656f4cc95d4d54d8f8}{wiic\-\_\-find()} function, but can also be set manually. 

\-Definition at line 152 of file io\-\_\-nix.\-c.

\hypertarget{io__nix_8c_a48a32197084dfb1ab5c8d3737b51257f}{\index{io\-\_\-nix.\-c@{io\-\_\-nix.\-c}!wiic\-\_\-connect\-\_\-single@{wiic\-\_\-connect\-\_\-single}}
\index{wiic\-\_\-connect\-\_\-single@{wiic\-\_\-connect\-\_\-single}!io_nix.c@{io\-\_\-nix.\-c}}
\subsubsection[{wiic\-\_\-connect\-\_\-single}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf wiic\-\_\-connect\-\_\-single} (
\begin{DoxyParamCaption}
\item[{struct {\bf wiimote\-\_\-t} $\ast$}]{wm, }
\item[{char $\ast$}]{address, }
\item[{int}]{autoreconnect}
\end{DoxyParamCaption}
)}}\label{io__nix_8c_a48a32197084dfb1ab5c8d3737b51257f}


\-Connect to a wiimote with a known address. 


\begin{DoxyParams}{\-Parameters}
{\em wm} & \-Pointer to a \hyperlink{structwiimote__t}{wiimote\-\_\-t} structure. \\
\hline
{\em address} & \-The address of the device to connect to. \-If \-N\-U\-L\-L, use the address in the struct set by \hyperlink{io__nix_8c_a52ee1d13f65c44656f4cc95d4d54d8f8}{wiic\-\_\-find()}. \\
\hline
{\em autoreconnect} & \-Re-\/connect to the device in case of unexpected disconnection.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
1 on success, 0 on failure 
\end{DoxyReturn}


\-Definition at line 239 of file io\-\_\-nix.\-c.

\hypertarget{io__nix_8c_a219a4ed8738f4937a777e02ed8656fcf}{\index{io\-\_\-nix.\-c@{io\-\_\-nix.\-c}!wiic\-\_\-disconnect@{wiic\-\_\-disconnect}}
\index{wiic\-\_\-disconnect@{wiic\-\_\-disconnect}!io_nix.c@{io\-\_\-nix.\-c}}
\subsubsection[{wiic\-\_\-disconnect}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf wiic\-\_\-disconnect} (
\begin{DoxyParamCaption}
\item[{struct {\bf wiimote\-\_\-t} $\ast$}]{wm}
\end{DoxyParamCaption}
)}}\label{io__nix_8c_a219a4ed8738f4937a777e02ed8656fcf}


\-Disconnect a wiimote. 


\begin{DoxyParams}{\-Parameters}
{\em wm} & \-Pointer to a \hyperlink{structwiimote__t}{wiimote\-\_\-t} structure.\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{\-See also}
\hyperlink{io__nix_8c_a356c1950a83d07f6f31efedfe5f5cdcc}{wiic\-\_\-connect()}
\end{DoxySeeAlso}
\-Note that this will not free the wiimote structure. 

\-Definition at line 314 of file io\-\_\-nix.\-c.

\hypertarget{io__nix_8c_a52ee1d13f65c44656f4cc95d4d54d8f8}{\index{io\-\_\-nix.\-c@{io\-\_\-nix.\-c}!wiic\-\_\-find@{wiic\-\_\-find}}
\index{wiic\-\_\-find@{wiic\-\_\-find}!io_nix.c@{io\-\_\-nix.\-c}}
\subsubsection[{wiic\-\_\-find}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf wiic\-\_\-find} (
\begin{DoxyParamCaption}
\item[{struct {\bf wiimote\-\_\-t} $\ast$$\ast$}]{wm, }
\item[{int}]{max\-\_\-wiimotes, }
\item[{int}]{timeout}
\end{DoxyParamCaption}
)}}\label{io__nix_8c_a52ee1d13f65c44656f4cc95d4d54d8f8}


\-Find a wiimote or wiimotes. 


\begin{DoxyParams}{\-Parameters}
{\em wm} & \-An array of \hyperlink{structwiimote__t}{wiimote\-\_\-t} structures. \\
\hline
{\em max\-\_\-wiimotes} & \-The number of wiimote structures in {\itshape wm\/}. \\
\hline
{\em timeout} & \-The number of seconds before the search times out.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
\-The number of wiimotes found.
\end{DoxyReturn}
\begin{DoxySeeAlso}{\-See also}
wiimote\-\_\-connect()
\end{DoxySeeAlso}
\-This function will only look for wiimote devices. \par
 \-When a device is found the address in the structures will be set. \par
 \-You can then call wiimote\-\_\-connect() to connect to the found \par
 devices. 

\-Definition at line 68 of file io\-\_\-nix.\-c.

\hypertarget{io__nix_8c_a7e041ddd6808f33ad799c6975bbe091f}{\index{io\-\_\-nix.\-c@{io\-\_\-nix.\-c}!wiic\-\_\-load@{wiic\-\_\-load}}
\index{wiic\-\_\-load@{wiic\-\_\-load}!io_nix.c@{io\-\_\-nix.\-c}}
\subsubsection[{wiic\-\_\-load}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf wiic\-\_\-load} (
\begin{DoxyParamCaption}
\item[{struct {\bf wiimote\-\_\-t} $\ast$$\ast$}]{wm}
\end{DoxyParamCaption}
)}}\label{io__nix_8c_a7e041ddd6808f33ad799c6975bbe091f}


\-Load \-Wii devices registered in the wiimotes.\-config file. 


\begin{DoxyParams}{\-Parameters}
{\em wm} & \-An array of \hyperlink{structwiimote__t}{wiimote\-\_\-t} structures.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
\-The number of wiimotes successfully loaded.
\end{DoxyReturn}
\begin{DoxySeeAlso}{\-See also}
\hyperlink{io__nix_8c_a52ee1d13f65c44656f4cc95d4d54d8f8}{wiic\-\_\-find()} 

\hyperlink{io__nix_8c_a356c1950a83d07f6f31efedfe5f5cdcc}{wiic\-\_\-connect()} 

\hyperlink{io__nix_8c_a48a32197084dfb1ab5c8d3737b51257f}{wiic\-\_\-connect\-\_\-single()} 

\hyperlink{io__nix_8c_a219a4ed8738f4937a777e02ed8656fcf}{wiic\-\_\-disconnect()}
\end{DoxySeeAlso}
\-Up to version 0.\-53, it is possible to register the \-M\-A\-C address of your \-Wii devices. \-This allows to automatically load them, without waiting for any search timeout. \-To register a new device, go to\-: $<$\-H\-O\-M\-E\-\_\-\-D\-I\-R$>$/.wiic/ and edit the file wiimotes.\-config, by adding the \-M\-A\-C address of the device you want to register (one line per \-M\-A\-C address). 

\-Definition at line 188 of file io\-\_\-nix.\-c.

