<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OpenGL Flythrough: events.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenGL Flythrough
   &#160;<span id="projectnumber">001</span>
   </div>
   <div id="projectbrief">Graphics I Project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('wiic__r90_2src_2wiic_2events_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">wiic_r90/src/wiic/events.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Handles wiimote events.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;sys/time.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="wiic__r90_2src_2wiic_2definitions_8h_source.html">definitions.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="wiic__r90_2src_2wiic_2io_8h_source.html">io.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="wiic__r90_2src_2wiic_2wiic__internal_8h_source.html">wiic_internal.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="wiic__r90_2src_2wiic_2dynamics_8h_source.html">dynamics.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="wiic__r90_2src_2wiic_2ir_8h_source.html">ir.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="wiic__r90_2src_2wiic_2nunchuk_8h_source.html">nunchuk.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="wiic__r90_2src_2wiic_2classic_8h_source.html">classic.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="wiic__r90_2src_2wiic_2guitar__hero__3_8h_source.html">guitar_hero_3.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="wiic__r90_2src_2wiic_2events_8h_source.html">events.h</a>&quot;</code><br/>
</div>
<p><a href="wiic__r90_2src_2wiic_2events_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af8bae66658de9b0d87cf39890b505440"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af8bae66658de9b0d87cf39890b505440"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STATE_CHANGED</b>(a, b)&#160;&#160;&#160;if (a != b)				return 1</td></tr>
<tr class="memitem:a54d0d3692b8b461574b9925e7d00b053"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>CROSS_THRESH</b>(last, now, thresh)</td></tr>
<tr class="memitem:aa0293dfc29d80ebdda7fa10ef67d7d42"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>CROSS_THRESH_XYZ</b>(last, now, thresh)</td></tr>
<tr class="memitem:a5140821fca809a8e31b8fc54b50dd208"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>CROSS_THRESH_RATE</b>(last, now, thresh)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab614a8e937b01dd2ae93f461cbb1a5a9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wiic__r90_2src_2wiic_2events_8c.html#ab614a8e937b01dd2ae93f461cbb1a5a9">idle_cycle</a> (struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *wm)</td></tr>
<tr class="memdesc:ab614a8e937b01dd2ae93f461cbb1a5a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called on a cycle where no significant change occurs.  <a href="#ab614a8e937b01dd2ae93f461cbb1a5a9"></a><br/></td></tr>
<tr class="memitem:a25dc969008973c968e11fd8b31775e2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wiic__r90_2src_2wiic_2events_8c.html#a25dc969008973c968e11fd8b31775e2f">clear_dirty_reads</a> (struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *wm)</td></tr>
<tr class="memdesc:a25dc969008973c968e11fd8b31775e2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear out all old 'dirty' read requests.  <a href="#a25dc969008973c968e11fd8b31775e2f"></a><br/></td></tr>
<tr class="memitem:ac045a0643d5364d8d1cd093f1b662108"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wiic__r90_2src_2wiic_2events_8c.html#ac045a0643d5364d8d1cd093f1b662108">propagate_event</a> (struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *wm, <a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> event, <a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *msg)</td></tr>
<tr class="memdesc:ac045a0643d5364d8d1cd093f1b662108"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analyze the event that occured on a wiimote.  <a href="#ac045a0643d5364d8d1cd093f1b662108"></a><br/></td></tr>
<tr class="memitem:a7950daed11e2c7b89aab4ce201f04b6d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wiic__r90_2src_2wiic_2events_8c.html#a7950daed11e2c7b89aab4ce201f04b6d">event_data_read</a> (struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *wm, <a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *msg)</td></tr>
<tr class="memdesc:a7950daed11e2c7b89aab4ce201f04b6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Received a data packet from a read request.  <a href="#a7950daed11e2c7b89aab4ce201f04b6d"></a><br/></td></tr>
<tr class="memitem:a5697afb339307c664466407317efc8a3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wiic__r90_2src_2wiic_2events_8c.html#a5697afb339307c664466407317efc8a3">event_status</a> (struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *wm, <a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *msg)</td></tr>
<tr class="memdesc:a5697afb339307c664466407317efc8a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the controller status.  <a href="#a5697afb339307c664466407317efc8a3"></a><br/></td></tr>
<tr class="memitem:a4f42a7aba5a9eb7f57d8a6ea9488cf9e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wiic__r90_2src_2wiic_2events_8c.html#a4f42a7aba5a9eb7f57d8a6ea9488cf9e">handle_expansion</a> (struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *wm, <a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *msg)</td></tr>
<tr class="memdesc:a4f42a7aba5a9eb7f57d8a6ea9488cf9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle data from the expansion.  <a href="#a4f42a7aba5a9eb7f57d8a6ea9488cf9e"></a><br/></td></tr>
<tr class="memitem:a291022db03cfff5328eeb716c3190409"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wiic__r90_2src_2wiic_2events_8c.html#a291022db03cfff5328eeb716c3190409">save_state</a> (struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *wm)</td></tr>
<tr class="memdesc:a291022db03cfff5328eeb716c3190409"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save important state data.  <a href="#a291022db03cfff5328eeb716c3190409"></a><br/></td></tr>
<tr class="memitem:a77ada8b59758e38f0004f6490e2ade13"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wiic__r90_2src_2wiic_2events_8c.html#a77ada8b59758e38f0004f6490e2ade13">state_changed</a> (struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *wm)</td></tr>
<tr class="memdesc:a77ada8b59758e38f0004f6490e2ade13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if the current state differs significantly from the previous.  <a href="#a77ada8b59758e38f0004f6490e2ade13"></a><br/></td></tr>
<tr class="memitem:a1a1c9eb3c4957b12ffb900d65a98310a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wiic__r90_2src_2wiic_2events_8c.html#a1a1c9eb3c4957b12ffb900d65a98310a">wiic_poll</a> (struct <a class="el" href="structwiimote__t.html">wiimote_t</a> **wm, int wiimotes)</td></tr>
<tr class="memdesc:a1a1c9eb3c4957b12ffb900d65a98310a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Poll the wiimotes for any events.  <a href="#a1a1c9eb3c4957b12ffb900d65a98310a"></a><br/></td></tr>
<tr class="memitem:a9d3d561a62161e2cb9443d613a07c96e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wiic__r90_2src_2wiic_2events_8c.html#a9d3d561a62161e2cb9443d613a07c96e">wiic_pressed_buttons</a> (struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *wm, <a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *msg)</td></tr>
<tr class="memdesc:a9d3d561a62161e2cb9443d613a07c96e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find what buttons are pressed.  <a href="#a9d3d561a62161e2cb9443d613a07c96e"></a><br/></td></tr>
<tr class="memitem:a14b6a00b1437061ce8ab09940b729e16"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wiic__r90_2src_2wiic_2events_8c.html#a14b6a00b1437061ce8ab09940b729e16">handshake_expansion</a> (struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *wm, <a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *data, unsigned short len)</td></tr>
<tr class="memdesc:a14b6a00b1437061ce8ab09940b729e16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the handshake data from the expansion device.  <a href="#a14b6a00b1437061ce8ab09940b729e16"></a><br/></td></tr>
<tr class="memitem:a96e25335cb926c6bb824f732361472bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wiic__r90_2src_2wiic_2events_8c.html#a96e25335cb926c6bb824f732361472bd">disable_expansion</a> (struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *wm)</td></tr>
<tr class="memdesc:a96e25335cb926c6bb824f732361472bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the expansion device if it was enabled.  <a href="#a96e25335cb926c6bb824f732361472bd"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Handles wiimote events. </p>
<p>The file includes functions that handle the events that are sent from the wiimote to us. </p>

<p>Definition in file <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html">wiic_r90/src/wiic/events.c</a>.</p>
</div><h2>Macro Definition Documentation</h2>
<a class="anchor" id="a54d0d3692b8b461574b9925e7d00b053"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CROSS_THRESH</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">last, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">now, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">thresh&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                                            \</div>
<div class="line">                    if (WIIMOTE_IS_FLAG_SET(wm, WIIC_ORIENT_THRESH)) {      \</div>
<div class="line">                        if ((diff_f(last.roll, now.roll) &gt;= thresh) ||          \</div>
<div class="line">                            (diff_f(last.pitch, now.pitch) &gt;= thresh) ||        \</div>
<div class="line">                            (diff_f(last.yaw, now.yaw) &gt;= thresh))              \</div>
<div class="line">                        {                                                       \</div>
<div class="line">                            last = now;                                         \</div>
<div class="line">                            return 1;                                           \</div>
<div class="line">                        }                                                       \</div>
<div class="line">                    } <span class="keywordflow">else</span> {                                                    \</div>
<div class="line">                        if (last.roll != now.roll)      return 1;               \</div>
<div class="line">                        if (last.pitch != now.pitch)    return 1;               \</div>
<div class="line">                        if (last.yaw != now.yaw)        return 1;               \</div>
<div class="line">                    }                                                           \</div>
<div class="line">                } while (0)</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5140821fca809a8e31b8fc54b50dd208"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CROSS_THRESH_RATE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">last, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">now, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">thresh&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                                            \</div>
<div class="line">                    if (WIIMOTE_IS_FLAG_SET(wm, WIIC_ORIENT_THRESH)) {      \</div>
<div class="line">                        if ((diff_f(last.roll, now.roll) &gt;= thresh) ||              \</div>
<div class="line">                            (diff_f(last.pitch, now.pitch) &gt;= thresh) ||                \</div>
<div class="line">                            (diff_f(last.yaw, now.yaw) &gt;= thresh))                  \</div>
<div class="line">                        {                                                       \</div>
<div class="line">                            last = now;                                         \</div>
<div class="line">                            return 1;                                           \</div>
<div class="line">                        }                                                       \</div>
<div class="line">                    } <span class="keywordflow">else</span> {                                                    \</div>
<div class="line">                        if (last.roll != now.roll)      return 1;                   \</div>
<div class="line">                        if (last.pitch != now.pitch)        return 1;                   \</div>
<div class="line">                        if (last.yaw != now.yaw)        return 1;                   \</div>
<div class="line">                    }                                                           \</div>
<div class="line">                } while (0)</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa0293dfc29d80ebdda7fa10ef67d7d42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CROSS_THRESH_XYZ</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">last, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">now, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">thresh&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                                            \</div>
<div class="line">                    if (WIIMOTE_IS_FLAG_SET(wm, WIIC_ORIENT_THRESH)) {      \</div>
<div class="line">                        if ((diff_f(last.x, now.x) &gt;= thresh) ||                \</div>
<div class="line">                            (diff_f(last.y, now.y) &gt;= thresh) ||                \</div>
<div class="line">                            (diff_f(last.z, now.z) &gt;= thresh))                  \</div>
<div class="line">                        {                                                       \</div>
<div class="line">                            last = now;                                         \</div>
<div class="line">                            return 1;                                           \</div>
<div class="line">                        }                                                       \</div>
<div class="line">                    } <span class="keywordflow">else</span> {                                                    \</div>
<div class="line">                        if (last.x != now.x)        return 1;                   \</div>
<div class="line">                        if (last.y != now.y)        return 1;                   \</div>
<div class="line">                        if (last.z != now.z)        return 1;                   \</div>
<div class="line">                    }                                                           \</div>
<div class="line">                } while (0)</div>
</div><!-- fragment -->
</div>
</div>
<h2>Function Documentation</h2>
<a class="anchor" id="a25dc969008973c968e11fd8b31775e2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clear_dirty_reads </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *&#160;</td>
          <td class="paramname"><em>wm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear out all old 'dirty' read requests. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wm</td><td>Pointer to a <a class="el" href="structwiimote__t.html" title="Wiimote structure.">wiimote_t</a> structure. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html#l00226">226</a> of file <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html">wiic_r90/src/wiic/events.c</a>.</p>

</div>
</div>
<a class="anchor" id="a96e25335cb926c6bb824f732361472bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disable_expansion </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *&#160;</td>
          <td class="paramname"><em>wm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable the expansion device if it was enabled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wm</td><td>A pointer to a <a class="el" href="structwiimote__t.html" title="Wiimote structure.">wiimote_t</a> structure. </td></tr>
    <tr><td class="paramname">data</td><td>The data read in from the device. </td></tr>
    <tr><td class="paramname">len</td><td>The length of the data block, in bytes.</td></tr>
  </table>
  </dd>
</dl>
<p>If the data is NULL then this function will try to start a handshake with the expansion. </p>

<p>Definition at line <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html#l00709">709</a> of file <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html">wiic_r90/src/wiic/events.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7950daed11e2c7b89aab4ce201f04b6d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void event_data_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *&#160;</td>
          <td class="paramname"><em>wm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Received a data packet from a read request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wm</td><td>Pointer to a <a class="el" href="structwiimote__t.html" title="Wiimote structure.">wiimote_t</a> structure. </td></tr>
    <tr><td class="paramname">msg</td><td>The message specified in the event packet.</td></tr>
  </table>
  </dd>
</dl>
<p>Data from the wiimote comes in packets. If the requested data segment size is bigger than one packet can hold then several packets will be received. These packets are first reassembled into one, then the registered callback function that handles data reads is invoked. </p>

<p>Definition at line <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html#l00421">421</a> of file <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html">wiic_r90/src/wiic/events.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5697afb339307c664466407317efc8a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void event_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *&#160;</td>
          <td class="paramname"><em>wm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the controller status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wm</td><td>Pointer to a <a class="el" href="structwiimote__t.html" title="Wiimote structure.">wiimote_t</a> structure. </td></tr>
    <tr><td class="paramname">msg</td><td>The message specified in the event packet.</td></tr>
  </table>
  </dd>
</dl>
<p>Read the controller status and execute the registered status callback. </p>

<p>Definition at line <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html#l00528">528</a> of file <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html">wiic_r90/src/wiic/events.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4f42a7aba5a9eb7f57d8a6ea9488cf9e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_expansion </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *&#160;</td>
          <td class="paramname"><em>wm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle data from the expansion. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wm</td><td>A pointer to a <a class="el" href="structwiimote__t.html" title="Wiimote structure.">wiimote_t</a> structure. </td></tr>
    <tr><td class="paramname">msg</td><td>The message specified in the event packet for the expansion. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html#l00598">598</a> of file <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html">wiic_r90/src/wiic/events.c</a>.</p>

</div>
</div>
<a class="anchor" id="a14b6a00b1437061ce8ab09940b729e16"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handshake_expansion </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *&#160;</td>
          <td class="paramname"><em>wm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle the handshake data from the expansion device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wm</td><td>A pointer to a <a class="el" href="structwiimote__t.html" title="Wiimote structure.">wiimote_t</a> structure. </td></tr>
    <tr><td class="paramname">data</td><td>The data read in from the device. </td></tr>
    <tr><td class="paramname">len</td><td>The length of the data block, in bytes.</td></tr>
  </table>
  </dd>
</dl>
<p>Tries to determine what kind of expansion was attached and invoke the correct handshake function.</p>
<p>If the data is NULL then this function will try to start a handshake with the expansion. </p>

<p>Definition at line <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html#l00634">634</a> of file <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html">wiic_r90/src/wiic/events.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab614a8e937b01dd2ae93f461cbb1a5a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void idle_cycle </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *&#160;</td>
          <td class="paramname"><em>wm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called on a cycle where no significant change occurs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wm</td><td>Pointer to a <a class="el" href="structwiimote__t.html" title="Wiimote structure.">wiimote_t</a> structure. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html#l00200">200</a> of file <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html">wiic_r90/src/wiic/events.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac045a0643d5364d8d1cd093f1b662108"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void propagate_event </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *&#160;</td>
          <td class="paramname"><em>wm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Analyze the event that occured on a wiimote. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wm</td><td>An array of pointers to <a class="el" href="structwiimote__t.html" title="Wiimote structure.">wiimote_t</a> structures. </td></tr>
    <tr><td class="paramname">event</td><td>The event that occured. </td></tr>
    <tr><td class="paramname">msg</td><td>The message specified in the event packet.</td></tr>
  </table>
  </dd>
</dl>
<p>Pass the event to the registered event callback. </p>

<p>Definition at line <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html#l00248">248</a> of file <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html">wiic_r90/src/wiic/events.c</a>.</p>

</div>
</div>
<a class="anchor" id="a291022db03cfff5328eeb716c3190409"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void save_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *&#160;</td>
          <td class="paramname"><em>wm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save important state data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wm</td><td>A pointer to a <a class="el" href="structwiimote__t.html" title="Wiimote structure.">wiimote_t</a> structure. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html#l00750">750</a> of file <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html">wiic_r90/src/wiic/events.c</a>.</p>

</div>
</div>
<a class="anchor" id="a77ada8b59758e38f0004f6490e2ade13"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int state_changed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *&#160;</td>
          <td class="paramname"><em>wm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if the current state differs significantly from the previous. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wm</td><td>A pointer to a <a class="el" href="structwiimote__t.html" title="Wiimote structure.">wiimote_t</a> structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if a significant change occured, 0 if not. </dd></dl>

<p>Definition at line <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html#l00813">813</a> of file <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html">wiic_r90/src/wiic/events.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1a1c9eb3c4957b12ffb900d65a98310a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wiic_poll </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwiimote__t.html">wiimote_t</a> **&#160;</td>
          <td class="paramname"><em>wm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>wiimotes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Poll the wiimotes for any events. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wm</td><td>An array of pointers to <a class="el" href="structwiimote__t.html" title="Wiimote structure.">wiimote_t</a> structures. </td></tr>
    <tr><td class="paramname">wiimotes</td><td>The number of <a class="el" href="structwiimote__t.html" title="Wiimote structure.">wiimote_t</a> structures in the <em>wm</em> array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns number of wiimotes that an event has occured on.</dd></dl>
<p>It is necessary to poll the wiimote devices for events that occur. If an event occurs on a particular wiimote, the event variable will be set. </p>

<p>Definition at line <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html#l00081">81</a> of file <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html">wiic_r90/src/wiic/events.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9d3d561a62161e2cb9443d613a07c96e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wiic_pressed_buttons </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structwiimote__t.html">wiimote_t</a> *&#160;</td>
          <td class="paramname"><em>wm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="wiic__r90_2src_2wiic_2wiic__macros_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find what buttons are pressed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wm</td><td>Pointer to a <a class="el" href="structwiimote__t.html" title="Wiimote structure.">wiimote_t</a> structure. </td></tr>
    <tr><td class="paramname">msg</td><td>The message specified in the event packet. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html#l00387">387</a> of file <a class="el" href="wiic__r90_2src_2wiic_2events_8c_source.html">wiic_r90/src/wiic/events.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d4f7a754e06480f800a6fab4b04999ce.html">Util</a></li><li class="navelem"><a class="el" href="dir_f23f48f4c872bc09b2809de37bcb9ee1.html">wiic_r90</a></li><li class="navelem"><a class="el" href="dir_d3a48894d8f0cd668ec62ea456801699.html">src</a></li><li class="navelem"><a class="el" href="dir_8f1932c500a942e4a1470dacab2af3e1.html">wiic</a></li><li class="navelem"><a class="el" href="wiic__r90_2src_2wiic_2events_8c.html">events.c</a></li>
    <li class="footer">Generated on Fri Nov 30 2012 23:23:59 for OpenGL Flythrough by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
